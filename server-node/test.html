<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script src="./node_modules/socket.io/node_modules/socket.io-client/dist/socket.io.js"></script>
    <script src="./colab.js"></script>
    <script>
    colab.addUserObserver('loggedIn', function(currUser) {
      console.log('we are now logged in', currUser);
    });

    colab.addGroupObserver('getList', function(groups) {
      console.log('observer got a list of groups', groups);

      //make sure we can retrieve each of the groups individually, by id
      for(var id in groups) {
        colab.getGroup(id);
      }
    });

    colab.addGroupObserver('get', function(group) {
      console.log('observer got a group', group);

      if(group.docs.one) {
        colab.joinDoc(group.docs.one.id);
      }
    });

    colab.addDocObserver('cursor', function(data) {
      console.log('cursor update', data);
    });

    colab.addDocObserver('join', function(docID) {
      console.log('just joined docID', docID);

      //FIRE!
      for(var i = 1; i < 100; i++) {
        colab.updateCursor(docID, i);
      }
    });
    </script>
  </head>
</html>
